<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1><%= developer.display_name %></h1>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <h4>Basic info</h4>
      <% developer.attributes.each_pair do |name, value| %>
        <% next if name == "id" %>
        <% next if name == "application_id" %>
        <p><strong><%= "#{name}:" %></strong>  <%= value %></p>
      <% end %>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <h4>Exit Tickets</h4>
      <%= render "/exit_tickets/form_table", tickets: developer.exit_tickets, link: true, comments: true %>
    </div>
  </div>
	
	<!-- better way to do this?? -->

<h2>Stats for Unit 1</h2>
<div id="eouStats">
	
	<table class="table table-condensed table-bordered">
		<tr>
			<th colspan="2" bgcolor="#404040">
				<font color="#FFFFFF">Attendance Report</font>
			</th>
		</tr>
		<tr>
			<td>Num Days Absent: </td>
			<td id = "num_absent"></td>
		</tr>
		<tr>
			<td>Num Days Late: </td>
			<td id= "num_late"></td>
		</tr>
		<tr>
			<td>Percent Present: </td>
			<td id="percent_present"></td>
		</tr>
		<tr>
			<td>Percent On Time: </td>
			<td id="percent_on_time"></td>
		</tr>
		<tr>
			<th colspan="2" bgcolor="#404040">
				<font color="#FFFFFF">Exit Ticket Report</font>
			</th>
		</tr>
		<tr>
			<td>Percent Completion: </td>
			<td id="ticket_completion"></td>
		</tr>
		<tr>
			<td>Percent Accuracy: </td>
			<td id="ticket_accuracy"></td>
		</tr>
		<tr>
			<th colspan="2" bgcolor="#404040">
				<font color="#FFFFFF">Homework Report</font>
			</th>
		</tr>
		<tr>
			<td>Num Missing: </td>
			<td id="hw_missing">tbd</td>
		</tr>
		<tr>
			<td>HW0: </td>
			<td id="hw0_score">[hw0 score]</td>
		</tr>
		<tr>
			<td>HW0: </td>
			<td id="hw1_score">[hw1 score]</td>
		</tr>
		
	</table>

<script type="text/javascript">
$.ajax({ 
url:"/developers/65/eouStats",
dataType: "json",
type: "GET", 
success: function(response) 
{ console.log(response); 
  displayStats(response);
}, 
})	

function displayStats(response) {
	document.getElementById("num_absent").innerHTML = response.num_absent;
	document.getElementById("num_late").innerHTML = response.num_late;
	
	var percent_present = 100 * response.num_present / (response.num_present + response.num_absent),
		percent_on_time = 100 * response.num_on_time / (response.num_on_time + response.num_late);
	
	document.getElementById("percent_present").innerHTML = percent_present + "%";
	document.getElementById("percent_on_time").innerHTML = percent_on_time + "%";
	document.getElementById("ticket_completion").innerHTML = response.ticket_completion.toFixed(2) + "%";
	document.getElementById("ticket_accuracy").innerHTML = response.ticket_accuracy.toFixed(2) + "%";
	
}
	
</script>
	
</div>
</div>